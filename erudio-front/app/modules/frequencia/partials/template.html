<!--* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *    @author Municipio de Itajaí - Secretaria de Educação - DITEC         *
 *    @updated 30/06/2016                                                  *
 *    Pacote: Erudio                                                       *
 *                                                                         *
 *    Copyright (C) 2016 Prefeitura de Itajaí - Secretaria de Educação     *
 *                       DITEC - Diretoria de Tecnologias educacionais     *
 *                        ditec@itajai.sc.gov.br                           *
 *                                                                         *
 *    Este  programa  é  software livre, você pode redistribuí-lo e/ou     *
 *    modificá-lo sob os termos da Licença Pública Geral GNU, conforme     *
 *    publicada pela Free  Software  Foundation,  tanto  a versão 2 da     *
 *    Licença   como  (a  seu  critério)  qualquer  versão  mais  nova.    *
 *                                                                         *
 *    Este programa  é distribuído na expectativa de ser útil, mas SEM     *
 *    QUALQUER GARANTIA. Sem mesmo a garantia implícita de COMERCIALI-     *
 *    ZAÇÃO  ou  de ADEQUAÇÃO A QUALQUER PROPÓSITO EM PARTICULAR. Con-     *
 *    sulte  a  Licença  Pública  Geral  GNU para obter mais detalhes.     *
 *                                                                         *
 *    Você  deve  ter  recebido uma cópia da Licença Pública Geral GNU     *
 *    junto  com  este  programa. Se não, escreva para a Free Software     *
 *    Foundation,  Inc.,  59  Temple  Place,  Suite  330,  Boston,  MA     *
 *    02111-1307, USA.                                                     *
 *                                                                         *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->

<!-- CSS DO MODULO -->
<link rel="stylesheet" type="text/css" href="{{ cssUrl }}/app/modules/frequencia/assets/css/frequencia.css"/>

<div id="listaFrequencias" style="position: relative;">
    <banner-frequencia></banner-frequencia>
    
    <div class="card" style="margin: 0 !important;">
        <div class="row" style="padding-top: 15px;">
            <div class="col s12">
                <div class="input-field col s12 m6 l6" data-ng-hide="escrita">
                    <i class="material-icons prefix">account_balance</i>
                    <select class="ng-valid initialized" id="unidade" data-ng-model="unidade.id" required>
                        <option disabled selected></option>
                        <option data-ng-selected="unidades.length === 1" class="truncate ng-binding" value="{{ unidade.id }}" data-ng-repeat="unidade in unidades">{{ unidade.nomeCompleto }}</option>
                    </select>
                    <label for="unidade">Unidade de Ensino*</label>
                </div>
                <div class="input-field col s12 m12 l6" data-ng-show="escrita">
                    <i class="material-icons prefix">account_balance</i>
                    <span class="digitable-icon"><i class="material-icons">border_color</i></span>
                    <input id="unidadeAutoComplete" class="dropdown" type="text" data-ng-model="nomeUnidade" data-ng-change="buscarUnidades(nomeUnidade)" data-activates="dropUnidadesBusca">
                    <label for="unidadeAutoComplete">Unidade de Ensino</label>
                </div>
                <div class="input-field col s12 m12 l6">
                    <i class="material-icons prefix">school</i>
                    <select id="curso" data-ng-change="buscarEtapas(busca.curso.id)" data-ng-model="busca.curso.id" required>
                        <option disabled selected></option> 
                        <option data-ng-selected="cursos.length === 1" class="truncate" value="{{ curso.curso.id }}" data-ng-repeat="curso in cursos">{{ curso.curso.nome }}</option>
                    </select>
                    <label for="curso">Curso</label>
                </div>
                <div class="input-field col s12 m12 l6" data-ng-show="Servidor.verificaSuperAdmin() || !Servidor.verificarPermissoes('SECRETARIA')">
                    <i class="material-icons prefix">layers</i>
                    <select id="etapa" data-ng-model="busca.etapa.id" data-ng-change="buscarTurmas('formBusca'); selecionarEtapa(busca.etapa.id)" data-ng-disabled="!etapas.length">
                        <option disabled selected></option> 
                        <option data-ng-selected="etapas.length === 1" value="{{ etapa.id }}" data-ng-repeat="etapa in etapas | orderBy: 'nome'">{{ etapa.nomeExibicao }}</option>
                    </select>
                    <label for="etapa">Etapa</label>
                </div>
                <div class="input-field col s12 m12 l6" data-ng-show="Servidor.verificaSuperAdmin() || !Servidor.verificarPermissoes('SECRETARIA')">
                    <i class="material-icons prefix">layers</i>
                    <select id="turma" data-ng-model="busca.turma.id">
                        <option disabled selected></option> 
                        <option value="{{ turma.id }}" data-ng-repeat="turma in turmas | orderBy: 'nome'">{{ turma.nomeCompleto }}</option>
                    </select>
                    <label for="turma">Turmas</label>
                </div>
            </div>
            <div class="col s12 right-align" style="border-top: 1px solid #e0e0e0; margin-top:20px;">
                <a data-ng-click="reiniciarBusca()" style="margin-top: 5px; margin-bottom: 5px;" class="waves-effect btn-flat"><i class="material-icons left">delete</i>LIMPAR BUSCA</a>
                <a data-ng-click="listarDisciplinas()" style="margin-top: 5px; margin-bottom: 5px;" class="waves-effect btn-flat"><i class="material-icons left">search</i>BUSCAR</a>
            </div>
        </div>
    </div>
    
    <ul id='dropUnidadesBusca' class='dropdown-content'>
        <li class="divider"></li>
        <li data-ng-repeat="unidade in unidades"><a data-ng-click="selecionaUnidade(unidade)">{{ unidade.tipo.sigla | uppercase }} {{unidade.nome | uppercase}}</a></li>
    </ul>
    
    <div class="row"><div class="col s12 l12 mobile-full init-card" style="padding: 0;"><div data-ng-include="tela"></div></div></div>
    <div data-ng-show="lista === true"><erro-busca-frequencia data-ng-hide="disciplinas.length"></erro-busca-frequencia></div>
    <controle-frequencia></controle-frequencia>
    <modal-frequencia></modal-frequencia>
</div>
